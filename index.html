<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://kit.fontawesome.com/ade78b387f.js" crossorigin="anonymous"></script>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet" />
  <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <link rel="icon" type="image/png" href="images/balloon.png" />
  <link rel="stylesheet" href="style.css">
  <script src="main.js" defer></script>
  <title>별풍력 테스트</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Yeon+Sung&display=swap');
  </style>
</head>

<body>
  <!-- navbar -->
  <nav id="navbar">
    <div class="navbar__title">
      <span class="navbar__title__logo">
        <h1 id="logo" style="color:#fe918d;"><i class=" fas fa-star"></i>별풍력 테스트</h1>
      </span>
      <h2>인공지능이 말해주는 내 별풍력</h2>
    </div>
  </nav>

  <!-- toogle -->
  <section id="gender">
    <span id="gender1" style="display:block;"> 여 <i class="fas fa-venus"></i></span>

    <span id="gender2" style="display:none; "> 남 <i class="fas fa-mars"></i></span>
    <div class="Content__gender"><input type="checkbox" class="switch_1" onclick="gender();"></div>
  </section>

  <div class="file-upload" id="girl" style="display: block;">
    <div class="image-upload-wrap">
      <input class="file-upload-input" type='file' onchange="readURL(this);" accept="image/*" />
      <!-- <br />
      <br />
      <br>
      <br> -->

      <div class="drag-text">
        <i class="fas fa-image fa-3x"></i>
        <h2>(사진 첨부)</h2>
        <h3>당신의 별풍력을 <br> 테스트해보세요!</h3>
      </div>
    </div>
    <div class=" file-upload-content">
      <img class="file-upload-image" id="face-id" src="#" alt="your image" />

    </div>
  </div>

  <div class="file-upload" id="boy" style="display: none;">
    <div class="image-upload-wrap">
      <input class="file-upload-input" type='file' onchange="readURL(this);" accept="image/*" />
      <div class="drag-text">
        <i class="fas fa-image fa-3x"></i>
        <h2>(사진 첨부)</h2>
        <h3>당신의 별풍력을 <br>테스트해보세요!</h3>
      </div>
    </div>
    <div class=" file-upload-content">
      <img class="file-upload-image" id="face-id" src="#" alt="your image" />

    </div>
  </div>
  <div class="container" style="display: none;">
    <h2>당신의 별풍력을 측정중입니다. <br>잠시만 기다려주세요</h2>
    <i class="fas fa-spinner fa-2x fa-spin"></i>
  </div>
  <div class="main">

    <div class="result-message1"></div>
    <div class="result-message2"></div>
    <div class="result-message3"></div>
    <div class="result-message4"></div>
    <div class="result-message5"></div>
    <div class="resultmessagesub"></div>
    <div class="result-detail"></div>
    <div id="label-container"></div>
    <div class="image-title-wrap" style="display: none;">
      <button type="button" onclick="removeUpload()" class="remove-image">다른 사진으로 재시도</button>
    </div>
  </div>
  <div id="disqus_thread"></div>
  <script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function () { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://codingnojam.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
      Disqus.</a></noscript>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js">
  </script>

  <script type="text/javascript">
    // More API functions here:
    // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image

    // the link to your model provided by Teachable Machine export panel

    const URL = "https://teachablemachine.withgoogle.com/models/RUAmcQEsS/";



    let model, webcam, labelContainer, maxPredictions;

    // Load the image model and setup the webcam
    async function init() {
      const modelURL = URL + "model.json";
      const metadataURL = URL + "metadata.json";

      // load the model and metadata
      // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
      // or files from your local hard drive
      // Note: the pose library adds "tmImage" object to your window (window.tmImage)
      model = await tmImage.load(modelURL, metadataURL);
      maxPredictions = model.getTotalClasses();

      // Convenience function to setup a webcam


      labelContainer = document.getElementById("label-container");
      for (let i = 0; i < maxPredictions; i++) { // and class labels
        labelContainer.appendChild(document.createElement("div"));

      }
    }

    // run the webcam image through the image model
    async function predict() {
      // predict can take in an image, video or canvas html element
      var image = document.getElementById("face-id")
      const prediction = await model.predict(image);
      prediction.sort((a, b) => parseFloat(b.probability) - parseFloat(a.probability));
      var resultMessage1;
      var resultDetail;
      var resultMessageSub;
      switch (prediction[0].className) {
        case "월1억":
          resultMessage1 = "Wow 천상계!! 축하합니다!!"
          resultMessageSub = "(당신은 한달에 100만개의 별풍선을 받을 수 있습니다.(월1억이상))"
          resultDetail = "나와 같은 별풍력을 가진 BJ : 크레용팝엘린, 박가린, 커멘더지코, 금화, 세야, 화정 등"
          break;
        case "월5천":
          resultMessage2 = "축하합니다 당신은 왕족입니다!"
          resultMessageSub = "(한달에 50만개 이상의 별풍선을 받을 수 있습니다.(5천만원!))"
          resultDetail = "나와 같은 별풍력을 가진 BJ : 케이, 아윤, 남순, 김인호, 뜨뜨뜨뜨, 나는푸르, 염보성 등"
          break;
        case "월3천":
          resultMessage3 = "당신은 귀족계층입니다!"
          resultMessageSub = "(한달에 30만개 이상의 별풍선을 받을 수 있습니다.(3천만원!))"
          resultDetail = "나와 같은 별풍력을 가진 BJ : 최군, 마이민, 타미미, 감스트, 오메킴, 랄랄, 영민 등"
          break;
        case "월천":
          resultMessage4 = "당신은 지방귀족입니다."
          resultMessageSub = "(한달에 10만개 이상의 별풍선을 받을 수 있습니다.(천만원!))"
          resultDetail = "나와 같은 별풍력을 가진 BJ : 철구, 대륙남, 기뉴다, 주보리, 김아인, 신나린 등"
          break;
        case "천이하":
          resultMessage5 = "당신은 평민계층 입니다."
          resultMessageSub = "(지금 하는일에 집중하세요!)"
          resultDetail = "나와 같은 별풍력을 가진 BJ : 탱글다희, 유혜디, 로이조, 까루, 이채이 등 "
          break;
      }
      if (prediction[0].className == '월1억') {

        $('.result-message1').html(resultMessage1);
        $('.resultmessagesub').html(resultMessageSub);
        $('.result-detail').html(resultDetail);
      } else if (prediction[0].className == '월5천') {
        $('.result-message2').html(resultMessage2);
        $('.resultmessagesub').html(resultMessageSub);
        $('.result-detail').html(resultDetail);
      } else if (prediction[0].className == '월3천') {
        $('.result-message3').html(resultMessage3);
        $('.resultmessagesub').html(resultMessageSub);
        $('.result-detail').html(resultDetail);
      } else if (prediction[0].className == '월천') {
        $('.result-message4').html(resultMessage4);
        $('.resultmessagesub').html(resultMessageSub);
        $('.result-detail').html(resultDetail);
      } else if (prediction[0].className == '천이하') {
        $('.result-message5').html(resultMessage5);
        $('.resultmessagesub').html(resultMessageSub);
        $('.result-detail').html(resultDetail);
      }

      for (let i = 0; i < maxPredictions; i++) {
        const classPrediction =
          prediction[i].className + ": " + prediction[i].probability.toFixed(2) * 100 + "%";
        labelContainer.childNodes[i].innerHTML = classPrediction;
      }
    }
  </script>

</body>

</html>