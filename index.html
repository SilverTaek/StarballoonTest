<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <link rel="stylesheet" href="style.css">
  <script src="main.js" defer></script>
  <!-- Go to www.addthis.com/dashboard to customize your tools -->
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5fc67adc63d4c6b8"></script>
</head>

<body>
  <!-- navbar -->
  <section id="navbar">
    <div class="navbar__logo"></div>
    <div class="navbar__menu"></div>

  </section>
  <div class="file-upload">
    <button class="file-upload-btn" type="button" onclick="$('.file-upload-input').trigger( 'click' )">Add
      Image</button>

    <div class="image-upload-wrap">
      <input class="file-upload-input" type='file' onchange="readURL(this);" accept="image/*" />
      <div class="drag-text">
        <h3>Drag and drop a file or select add Image</h3>
      </div>
    </div>
    <div class="file-upload-content">
      <img class="file-upload-image" id="face-image" src="#" alt="your image" />
      <p class="result-message"></p>
      <div id="label-container"></div>
      <div class="image-title-wrap">
        <button type="button" onclick="removeUpload()" class="remove-image">Remove <span class="image-title">Uploaded
            Image</span></button>
      </div>

    </div>

  </div>

  <!-- Go to www.addthis.com/dashboard to customize your tools -->
  <div class="addthis_inline_share_toolbox"></div>





  <div id="disqus_thread"></div>
  <script>

    (function () {
      var d = document, s = d.createElement('script');
      s.src = 'https://taekcoding.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
      Disqus.</a></noscript>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
  <script type="text/javascript">

    const URL = "https://teachablemachine.withgoogle.com/models/RUAmcQEsS/";

    let model, webcam, labelContainer, maxPredictions;


    async function init() {
      const modelURL = URL + "model.json";
      const metadataURL = URL + "metadata.json";

      model = await tmImage.load(modelURL, metadataURL);
      maxPredictions = model.getTotalClasses();

      labelContainer = document.getElementById("label-container");
      for (let i = 0; i < maxPredictions; i++) { // and class labels
        labelContainer.appendChild(document.createElement("div"));
      }
    }




    async function predict() {

      var image = document.getElementById("face-image")
      const prediction = await model.predict(image, false);
      prediction.sort((a, b) => parseFloat(b.probability) - parseFloat(a.probability));
      var resultMessage;
      switch (prediction[0].className) {
        case "월1억":
          resultMessage = "당신은 한달에 100만개의 별풍선을 받을 수 있습니다! 지금 당장 도전하세요!"
          break;
        case "월5천":
          resultMessage = "당신은 한달에 50만개 이상의 별풍선을 받을 수 있습니다 지금 당장 도전하세요!!"
          break;
        case "월3천":
          resultMessage = "당신은 한달에 30만개 이상의 별풍선을 받을 수 있습니다 지금 당장 도전하세요!!"
          break;
        case "월천":
          resultMessage = "당신은 한달에 10만개 이상의 별풍선을 받을 수 있습니다 지금 당장 도전하세요!!"
          break;
        case "천이하":
          resultMessage = "당신은 일반인 입니다. 지금 하던일에 집중하세요!"
          break;
      }
      $('.result-message').html(resultMessage);
      for (let i = 0; i < maxPredictions; i++) {
        const classPrediction =
          prediction[i].className + ": " + prediction[i].probability.toFixed(2);
        labelContainer.childNodes[i].innerHTML = classPrediction;
      }
    }
  </script>

</body>

</html>